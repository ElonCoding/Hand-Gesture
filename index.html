<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Three.js Hand Gesture Particle System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- MediaPipe Hands -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

  <!-- Three.js -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>

  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="container">
    <video id="video" autoplay muted playsinline></video>
    <canvas id="three-canvas"></canvas>
    <div id="ui-overlay">
      <div id="status">Initializing...</div>
      <div id="shape-indicator">Current Shape: <span id="current-shape">Sphere</span></div>
      <div id="gesture-info">Gesture: <span id="current-gesture">Open Hand</span></div>
      <div id="pinch-indicator" style="display: none;">ğŸ“Œ Pinch Detected!</div>
      <div id="pinch-debug" style="display: none; position: absolute; top: 160px; left: 20px; color: #fff; background: rgba(0, 0, 0, 0.7); padding: 8px 12px; border-radius: 6px; font-size: 10px; font-family: monospace;"></div>
      <div id="pinch-meter" style="display: none; position: absolute; top: 200px; left: 20px; width: 120px; height: 8px; background: rgba(0, 0, 0, 0.5); border-radius: 4px; overflow: hidden;">
        <div id="pinch-charge" style="height: 100%; width: 0%; background: linear-gradient(90deg, #ffeb3b, #ff9800); border-radius: 4px; transition: width 0.1s ease;"></div>
      </div>
      <div id="calibration-status" style="display: none; position: absolute; top: 215px; left: 20px; color: #4caf50; background: rgba(0, 0, 0, 0.7); padding: 4px 8px; border-radius: 4px; font-size: 10px; font-family: monospace;">
        ğŸ“ Calibrated
      </div>
      <div id="pinch-tutorial" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.9); color: white; padding: 20px; border-radius: 10px; text-align: center; max-width: 300px; z-index: 1000;">
        <h3>ğŸ¤ Pinch to Switch Shapes!</h3>
        <p>Touch your thumb and index finger together to switch between particle shapes.</p>
        <div style="margin: 15px 0; font-size: 24px;">ğŸ‘ â†’ ğŸ¤ â†’ âœ¨</div>
        <p><small>The charge meter will show when you're ready to switch!</small></p>
        <button onclick="this.parentElement.style.display='none'" style="background: #4caf50; color: white; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; margin-top: 10px;">Got it!</button>
      </div>
      <div id="instructions">
        <p>ğŸ‘‹ Move your hand to control particles</p>
        <p>ğŸ¤ Pinch to switch shapes</p>
        <p>âœ‹ Open/close hand to change size</p>
        <div id="shape-list">
          <small>Available shapes: Sphere â†’ Heart â†’ Ring â†’ Spiral â†’ Cube â†’ Wave â†’ Torus â†’ Star</small>
        </div>
        <div id="controls">
          <small>Keyboard: [1-3] Quality | [Space] Switch | [R] Reset | [D] Debug | [C] Calibrate Pinch | [B] Background Quality | [N] Color Palette | [M] Background UI</small>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="main.js"></script>
</body>
</html>
